
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Query &#8212; ndb 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tasklets" href="tasklets.html" />
    <link rel="prev" title="Model and Property" href="model.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-google.cloud.ndb.query">
<span id="query"></span><h1>Query<a class="headerlink" href="#module-google.cloud.ndb.query" title="Permalink to this headline">¶</a></h1>
<p>High-level wrapper for datastore queries.</p>
<p>The fundamental API here overloads the 6 comparison operators to represent
filters on property values, and supports AND and OR operations (implemented as
functions – Python’s ‘and’ and ‘or’ operators cannot be overloaded, and the
‘&amp;’ and ‘|’ operators have a priority that conflicts with the priority of
comparison operators).</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Employee</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">()</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">IntegerProperty</span><span class="p">()</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="n">IntegerProperty</span><span class="p">()</span>

  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">demographic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">min_age</span><span class="p">,</span> <span class="n">max_age</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">AND</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="n">min_age</span><span class="p">,</span>
                                    <span class="bp">cls</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;=</span> <span class="n">max_age</span><span class="p">))</span>

  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">ranked</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">rank</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="n">rank</span><span class="p">)</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>

<span class="k">for</span> <span class="n">emp</span> <span class="ow">in</span> <span class="n">Employee</span><span class="o">.</span><span class="n">seniors</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">emp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">emp</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">emp</span><span class="o">.</span><span class="n">rank</span>
</pre></div>
</div>
<p>The ‘in’ operator cannot be overloaded, but is supported through the IN()
method. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Employee</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">IN</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span>
</pre></div>
</div>
<p>Sort orders are supported through the order() method; unary minus is
overloaded on the Property class to represent a descending order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Employee</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">-</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
</pre></div>
</div>
<p>Besides using AND() and OR(), filters can also be combined by repeatedly
calling .filter():</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query1</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>  <span class="c1"># A query that returns all employees</span>
<span class="n">query2</span> <span class="o">=</span> <span class="n">query1</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">)</span>  <span class="c1"># Only those over 30</span>
<span class="n">query3</span> <span class="o">=</span> <span class="n">query2</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">)</span>  <span class="c1"># Only those in their 30s</span>
</pre></div>
</div>
<p>A further shortcut is calling .filter() with multiple arguments; this implies
AND():</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query1</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>  <span class="c1"># A query that returns all employees</span>
<span class="n">query3</span> <span class="o">=</span> <span class="n">query1</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">,</span>
                       <span class="n">Employee</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">)</span>  <span class="c1"># Only those in their 30s</span>
</pre></div>
</div>
<p>And finally you can also pass one or more filter expressions directly to the
.query() method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query3</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="n">Employee</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">)</span>  <span class="c1"># Only those in their 30s</span>
</pre></div>
</div>
<p>Query objects are immutable, so these methods always return a new Query object;
the above calls to filter() do not affect query1. On the other hand, operations
that are effectively no-ops may return the original Query object.</p>
<p>Sort orders can also be combined this way, and .filter() and .order() calls may
be intermixed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query4</span> <span class="o">=</span> <span class="n">query3</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="o">-</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="n">query5</span> <span class="o">=</span> <span class="n">query4</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">query6</span> <span class="o">=</span> <span class="n">query5</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Employee</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Again, multiple .order() calls can be combined:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query5</span> <span class="o">=</span> <span class="n">query3</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="o">-</span><span class="n">Employee</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">Employee</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The simplest way to retrieve Query results is a for-loop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">emp</span> <span class="ow">in</span> <span class="n">query3</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">emp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">emp</span><span class="o">.</span><span class="n">age</span>
</pre></div>
</div>
<p>Some other methods to run a query and access its results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>:meth:`Query.iter`() # Return an iterator; same as iter(q) but more
    flexible.
:meth:`Query.map`(callback) # Call the callback function for each query
    result.
:meth:`Query.fetch`(N) # Return a list of the first N results
:meth:`Query.get`() # Return the first result
:meth:`Query.count`(N) # Return the number of results, with a maximum of N
:meth:`Query.fetch_page`(N, start_cursor=cursor) # Return (results, cursor,
    has_more)
</pre></div>
</div>
<p>All of the above methods take a standard set of additional query options,
either in the form of keyword arguments such as keys_only=True, or as
QueryOptions object passed with options=QueryOptions(…). The most important
query options are:</p>
<ul class="simple">
<li><p>keys_only: bool, if set the results are keys instead of entities.</p></li>
<li><p>limit: int, limits the number of results returned.</p></li>
<li><p>offset: int, skips this many results first.</p></li>
<li><p>start_cursor: Cursor, start returning results after this position.</p></li>
<li><p>end_cursor: Cursor, stop returning results after this position.</p></li>
<li><p>batch_size: int, hint for the number of results returned per RPC.</p></li>
<li><p>prefetch_size: int, hint for the number of results in the first RPC.</p></li>
<li><p>produce_cursors: bool, return Cursor objects with the results.</p></li>
</ul>
<p>All of the above methods except for iter() have asynchronous variants as well,
which return a Future; to get the operation’s ultimate result, yield the Future
(when inside a tasklet) or call the Future’s get_result() method (outside a
tasklet):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>:meth:`Query.map_async`(callback)  # Callback may be a tasklet or a plain function
:meth:`Query.fetch_async`(N)
:meth:`Query.get_async`()
:meth:`Query.count_async`(N)
:meth:`Query.fetch_page_async`(N, start_cursor=cursor)
</pre></div>
</div>
<p>Finally, there’s an idiom to efficiently loop over the Query results in a
tasklet, properly yielding when appropriate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="o">=</span> <span class="n">query1</span><span class="o">.</span><span class="n">iter</span><span class="p">()</span>
<span class="k">while</span> <span class="p">(</span><span class="k">yield</span> <span class="n">it</span><span class="o">.</span><span class="n">has_next_async</span><span class="p">()):</span>
    <span class="n">emp</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
    <span class="nb">print</span> <span class="n">emp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">emp</span><span class="o">.</span><span class="n">age</span>
</pre></div>
</div>
<dl class="class">
<dt id="google.cloud.ndb.query.QueryOptions">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">QueryOptions</code><span class="sig-paren">(</span><em class="sig-param">config=None</em>, <em class="sig-param">client=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#QueryOptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb._options.ReadOptions</span></code></p>
<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.ancestor">
<code class="sig-name descname">ancestor</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.ancestor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.QueryOptions.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.distinct_on">
<code class="sig-name descname">distinct_on</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.distinct_on" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.end_cursor">
<code class="sig-name descname">end_cursor</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.end_cursor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.filters">
<code class="sig-name descname">filters</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.filters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.force_writes">
<code class="sig-name descname">force_writes</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.force_writes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.group_by">
<code class="sig-name descname">group_by</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.group_by" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.QueryOptions.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.keys_only">
<code class="sig-name descname">keys_only</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.keys_only" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.kind">
<code class="sig-name descname">kind</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.kind" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.limit">
<code class="sig-name descname">limit</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.limit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.max_memcache_items">
<code class="sig-name descname">max_memcache_items</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.max_memcache_items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.memcache_timeout">
<code class="sig-name descname">memcache_timeout</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.memcache_timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.namespace">
<code class="sig-name descname">namespace</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.namespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.offset">
<code class="sig-name descname">offset</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.QueryOptions.options">
<em class="property">classmethod </em><code class="sig-name descname">options</code><span class="sig-paren">(</span><em class="sig-param">wrapped</em><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.order_by">
<code class="sig-name descname">order_by</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.order_by" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.orders">
<code class="sig-name descname">orders</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.orders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.project">
<code class="sig-name descname">project</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.project" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.projection">
<code class="sig-name descname">projection</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.projection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.propagation">
<code class="sig-name descname">propagation</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.propagation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.read_consistency">
<code class="sig-name descname">read_consistency</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.read_consistency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.retries">
<code class="sig-name descname">retries</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.retries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.QueryOptions.slots">
<em class="property">classmethod </em><code class="sig-name descname">slots</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.slots" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.start_cursor">
<code class="sig-name descname">start_cursor</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.start_cursor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.timeout">
<code class="sig-name descname">timeout</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.transaction">
<code class="sig-name descname">transaction</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.transaction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.use_cache">
<code class="sig-name descname">use_cache</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.use_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.use_datastore">
<code class="sig-name descname">use_datastore</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.use_datastore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.QueryOptions.use_memcache">
<code class="sig-name descname">use_memcache</code><a class="headerlink" href="#google.cloud.ndb.query.QueryOptions.use_memcache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.PropertyOrder">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">PropertyOrder</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">reverse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#PropertyOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.PropertyOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The sort order for a property name, to be used when ordering the
results of a query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the model property to use for ordering.</p></li>
<li><p><strong>reverse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to reverse the sort order (descending)
or not (ascending). Default is False.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="google.cloud.ndb.query.PropertyOrder.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#google.cloud.ndb.query.PropertyOrder.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.PropertyOrder.reverse">
<code class="sig-name descname">reverse</code><a class="headerlink" href="#google.cloud.ndb.query.PropertyOrder.reverse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.RepeatedStructuredPropertyPredicate">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">RepeatedStructuredPropertyPredicate</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">match_keys</em>, <em class="sig-param">entity_pb</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#RepeatedStructuredPropertyPredicate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.RepeatedStructuredPropertyPredicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A predicate for querying repeated structured properties.</p>
<p>Called by <code class="docutils literal notranslate"><span class="pre">model.StructuredProperty._compare</span></code>. This is used to handle
queries of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Squad</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Squad</span><span class="o">.</span><span class="n">members</span> <span class="o">==</span> <span class="n">Member</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Joe&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>This query should find any squad with a member named “Joe” whose age is 24
and rank is 5.</p>
<p>Datastore, on its own, can find all squads with a team member named Joe, or
a team member whose age is 24, or whose rank is 5, but it can’t be queried
for all 3 in a single subentity. This predicate must be applied client
side, therefore, to limit results to entities where all the keys match for
a single subentity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Name of the repeated structured property being queried
(e.g. “members”).</p></li>
<li><p><strong>match_keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – Property names to check on the subentities
being queried (e.g. [“name”, “age”, “rank”]).</p></li>
<li><p><strong>entity_pb</strong> (<em>google.cloud.datastore_v1.proto.entity_pb2.Entity</em>) – A
partial entity protocol buffer containing the values that must
match in a subentity of the repeated structured property. Should
contain a value for each key in <code class="docutils literal notranslate"><span class="pre">match_keys</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="google.cloud.ndb.query.RepeatedStructuredPropertyPredicate.match_keys">
<code class="sig-name descname">match_keys</code><a class="headerlink" href="#google.cloud.ndb.query.RepeatedStructuredPropertyPredicate.match_keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.RepeatedStructuredPropertyPredicate.match_values">
<code class="sig-name descname">match_values</code><a class="headerlink" href="#google.cloud.ndb.query.RepeatedStructuredPropertyPredicate.match_values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.RepeatedStructuredPropertyPredicate.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#google.cloud.ndb.query.RepeatedStructuredPropertyPredicate.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.ParameterizedThing">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">ParameterizedThing</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ParameterizedThing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ParameterizedThing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for <a class="reference internal" href="#google.cloud.ndb.query.Parameter" title="google.cloud.ndb.query.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> and <a class="reference internal" href="#google.cloud.ndb.query.ParameterizedFunction" title="google.cloud.ndb.query.ParameterizedFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParameterizedFunction</span></code></a>.</p>
<p>This exists purely for <a class="reference external" href="https://docs.python.org/3/library/functions.html#isinstance" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">isinstance()</span></code></a> checks.</p>
</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.Parameter">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">Parameter</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.ParameterizedThing" title="google.cloud.ndb.query.ParameterizedThing"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.ParameterizedThing</span></code></a></p>
<p>Represents a bound variable in a GQL query.</p>
<p><code class="docutils literal notranslate"><span class="pre">Parameter(1)</span></code> corresponds to a slot labeled <code class="docutils literal notranslate"><span class="pre">:1</span></code> in a GQL query.
<code class="docutils literal notranslate"><span class="pre">Parameter('xyz')</span></code> corresponds to a slot labeled <code class="docutils literal notranslate"><span class="pre">:xyz</span></code>.</p>
<p>The value must be set (bound) separately.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – The parameter key.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If the <code class="docutils literal notranslate"><span class="pre">key</span></code> is not a string or integer.</p>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.Parameter.key">
<em class="property">property </em><code class="sig-name descname">key</code><a class="headerlink" href="#google.cloud.ndb.query.Parameter.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the key.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Parameter.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Parameter.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Parameter.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve the current parameter from the parameter bindings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified if the current parameter
is in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The bound value for the current parameter.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#google.cloud.ndb.exceptions.BadArgumentError" title="google.cloud.ndb.exceptions.BadArgumentError"><strong>BadArgumentError</strong></a> – If the current parameter is not in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.ParameterizedFunction">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">ParameterizedFunction</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">values</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ParameterizedFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ParameterizedFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.ParameterizedThing" title="google.cloud.ndb.query.ParameterizedThing"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.ParameterizedThing</span></code></a></p>
<p>Represents a GQL function with parameterized arguments.</p>
<p>For example, ParameterizedFunction(‘key’, [Parameter(1)]) stands for
the GQL syntax KEY(:1).</p>
<dl class="method">
<dt id="google.cloud.ndb.query.ParameterizedFunction.func">
<em class="property">property </em><code class="sig-name descname">func</code><a class="headerlink" href="#google.cloud.ndb.query.ParameterizedFunction.func" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.ParameterizedFunction.values">
<em class="property">property </em><code class="sig-name descname">values</code><a class="headerlink" href="#google.cloud.ndb.query.ParameterizedFunction.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.Node">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">Node</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Node"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for filter expression tree nodes.</p>
<p>Tree nodes are considered immutable, even though they can contain
Parameter instances, which are not. In particular, two identical
trees may be represented by the same Node object in different
contexts.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – Always, only subclasses are allowed.</p>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.Node.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Node.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Node.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">bindings</span></code> and <code class="docutils literal notranslate"><span class="pre">used</span></code> are unused by this base class
implementation.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified if the current parameter
is in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current node.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.FalseNode">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">FalseNode</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#FalseNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.FalseNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.Node</span></code></a></p>
<p>Tree node for an always-failing filter.</p>
<dl class="method">
<dt id="google.cloud.ndb.query.FalseNode.__eq__">
<code class="sig-name descname">__eq__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#FalseNode.__eq__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.FalseNode.__eq__" title="Permalink to this definition">¶</a></dt>
<dd><p>Equality check.</p>
<p>An instance will always equal another <a class="reference internal" href="#google.cloud.ndb.query.FalseNode" title="google.cloud.ndb.query.FalseNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">FalseNode</span></code></a> instance. This
is because they hold no state.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.FalseNode.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.FalseNode.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">bindings</span></code> and <code class="docutils literal notranslate"><span class="pre">used</span></code> are unused by this base class
implementation.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified if the current parameter
is in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current node.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.ParameterNode">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">ParameterNode</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ParameterNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ParameterNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.Node</span></code></a></p>
<p>Tree node for a parameterized filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prop</strong> (<a class="reference internal" href="model.html#google.cloud.ndb.model.Property" title="google.cloud.ndb.model.Property"><em>Property</em></a>) – A property describing a value
type.</p></li>
<li><p><strong>op</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The comparison operator. One of <code class="docutils literal notranslate"><span class="pre">=</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>,
<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> or <code class="docutils literal notranslate"><span class="pre">in</span></code>.</p></li>
<li><p><strong>param</strong> (<a class="reference internal" href="#google.cloud.ndb.query.ParameterizedThing" title="google.cloud.ndb.query.ParameterizedThing"><em>ParameterizedThing</em></a>) – The parameter corresponding to the node.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">prop</span></code> is not a
    <a class="reference internal" href="model.html#google.cloud.ndb.model.Property" title="google.cloud.ndb.model.Property"><code class="xref py py-class docutils literal notranslate"><span class="pre">Property</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">op</span></code> is not one of the accepted operators.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">param</span></code> is not a <a class="reference internal" href="#google.cloud.ndb.query.Parameter" title="google.cloud.ndb.query.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> or
    <a class="reference internal" href="#google.cloud.ndb.query.ParameterizedFunction" title="google.cloud.ndb.query.ParameterizedFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParameterizedFunction</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.ParameterNode.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ParameterNode.__getnewargs__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ParameterNode.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Private API used to specify <code class="docutils literal notranslate"><span class="pre">__new__</span></code> arguments when unpickling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method only applies if the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> protocol is 2 or
greater.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple containing the internal state: the property, operation and
parameter.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="model.html#google.cloud.ndb.model.Property" title="google.cloud.ndb.model.Property">Property</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>, <a class="reference internal" href="#google.cloud.ndb.query.ParameterizedThing" title="google.cloud.ndb.query.ParameterizedThing">ParameterizedThing</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.ParameterNode.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ParameterNode.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ParameterNode.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A node corresponding to
the value substituted.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[<a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode">DisjunctionNode</a>,                 <a class="reference internal" href="#google.cloud.ndb.query.FilterNode" title="google.cloud.ndb.query.FilterNode">FilterNode</a>,                 <a class="reference internal" href="#google.cloud.ndb.query.FalseNode" title="google.cloud.ndb.query.FalseNode">FalseNode</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.FilterNode">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">FilterNode</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#FilterNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.FilterNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.Node</span></code></a></p>
<p>Tree node for a single filter expression.</p>
<p>For example <code class="docutils literal notranslate"><span class="pre">FilterNode(&quot;a&quot;,</span> <span class="pre">&quot;&gt;&quot;,</span> <span class="pre">3)</span></code> filters for entities where the
value <code class="docutils literal notranslate"><span class="pre">a</span></code> is greater than <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The constructor for this type may not always return a
<a class="reference internal" href="#google.cloud.ndb.query.FilterNode" title="google.cloud.ndb.query.FilterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterNode</span></code></a>. For example:</p>
<ul class="simple">
<li><p>The filter <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">!=</span> <span class="pre">value</span></code> is converted into
<code class="docutils literal notranslate"><span class="pre">(name</span> <span class="pre">&gt;</span> <span class="pre">value)</span> <span class="pre">OR</span> <span class="pre">(name</span> <span class="pre">&lt;</span> <span class="pre">value)</span></code> (a <a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisjunctionNode</span></code></a>)</p></li>
<li><p>The filter <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">(value1,</span> <span class="pre">...,</span> <span class="pre">valueN)</span></code> is converted into
<code class="docutils literal notranslate"><span class="pre">(name</span> <span class="pre">=</span> <span class="pre">value1)</span> <span class="pre">OR</span> <span class="pre">...</span> <span class="pre">OR</span> <span class="pre">(name</span> <span class="pre">=</span> <span class="pre">valueN)</span></code> (also a
<a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisjunctionNode</span></code></a>)</p></li>
<li><p>The filter <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">()</span></code> (i.e. a property is among an empty list
of values) is converted into a <a class="reference internal" href="#google.cloud.ndb.query.FalseNode" title="google.cloud.ndb.query.FalseNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">FalseNode</span></code></a></p></li>
<li><p>The filter <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">(value1,)</span></code> (i.e. a list with one element) is
converted into <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">value1</span></code>, a related <a class="reference internal" href="#google.cloud.ndb.query.FilterNode" title="google.cloud.ndb.query.FilterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterNode</span></code></a>
with a different <code class="docutils literal notranslate"><span class="pre">opsymbol</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> than what was passed
to the constructor</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the property being filtered.</p></li>
<li><p><strong>opsymbol</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The comparison operator. One of <code class="docutils literal notranslate"><span class="pre">=</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> or <code class="docutils literal notranslate"><span class="pre">in</span></code>.</p></li>
<li><p><strong>value</strong> (<em>Any</em>) – The value to filter on / relative to.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">opsymbol</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;in&quot;</span></code> but <code class="docutils literal notranslate"><span class="pre">value</span></code> is not a
    basic container (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> or
    <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a>)</p>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.FilterNode.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#FilterNode.__getnewargs__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.FilterNode.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Private API used to specify <code class="docutils literal notranslate"><span class="pre">__new__</span></code> arguments when unpickling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method only applies if the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> protocol is 2 or
greater.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple containing the
internal state: the name, <code class="docutils literal notranslate"><span class="pre">opsymbol</span></code> and value.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.FilterNode.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.FilterNode.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">bindings</span></code> and <code class="docutils literal notranslate"><span class="pre">used</span></code> are unused by this base class
implementation.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified if the current parameter
is in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current node.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.PostFilterNode">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">PostFilterNode</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#PostFilterNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.PostFilterNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.Node</span></code></a></p>
<p>Tree node representing an in-memory filtering operation.</p>
<p>This is used to represent filters that cannot be executed by the
datastore, for example a query for a structured value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>predicate</strong> (<em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A filter predicate that
takes a datastore entity (typically as a protobuf) and
returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a> if the entity matches
the given filter.</p>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.PostFilterNode.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#PostFilterNode.__getnewargs__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.PostFilterNode.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Private API used to specify <code class="docutils literal notranslate"><span class="pre">__new__</span></code> arguments when unpickling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method only applies if the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> protocol is 2 or
greater.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple containing a single value,
the <code class="docutils literal notranslate"><span class="pre">predicate</span></code> attached to this node.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[Callable[[Any], <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>],]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.PostFilterNode.predicate">
<code class="sig-name descname">predicate</code><a class="headerlink" href="#google.cloud.ndb.query.PostFilterNode.predicate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.PostFilterNode.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.PostFilterNode.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">bindings</span></code> and <code class="docutils literal notranslate"><span class="pre">used</span></code> are unused by this base class
implementation.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified if the current parameter
is in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current node.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.ConjunctionNode">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">ConjunctionNode</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ConjunctionNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ConjunctionNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.Node</span></code></a></p>
<p>Tree node representing a boolean <code class="docutils literal notranslate"><span class="pre">AND</span></code> operator on multiple nodes.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The constructor for this type may not always return a
<a class="reference internal" href="#google.cloud.ndb.query.ConjunctionNode" title="google.cloud.ndb.query.ConjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConjunctionNode</span></code></a>. For example:</p>
<ul class="simple">
<li><p>If the passed in <code class="docutils literal notranslate"><span class="pre">nodes</span></code> has only one entry, that single node
will be returned by the constructor</p></li>
<li><p>If the resulting boolean expression has an <code class="docutils literal notranslate"><span class="pre">OR</span></code> in it, then a
<a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisjunctionNode</span></code></a> will be returned; e.g.
<code class="docutils literal notranslate"><span class="pre">AND(OR(A,</span> <span class="pre">B),</span> <span class="pre">C)</span></code> becomes <code class="docutils literal notranslate"><span class="pre">OR(AND(A,</span> <span class="pre">C),</span> <span class="pre">AND(B,</span> <span class="pre">C))</span></code></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodes</strong> (<em>Tuple</em><em>[</em><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><em>Node</em></a><em>, </em><em>..</em><em>]</em>) – A list of nodes to be joined.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">nodes</span></code> is empty.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.7)"><strong>RuntimeError</strong></a> – If the <code class="docutils literal notranslate"><span class="pre">nodes</span></code> combine to an “empty” boolean
    expression.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.ConjunctionNode.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ConjunctionNode.__getnewargs__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ConjunctionNode.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Private API used to specify <code class="docutils literal notranslate"><span class="pre">__new__</span></code> arguments when unpickling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method only applies if the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> protocol is 2 or
greater.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of stored nodes, converted to a
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a>, ..]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.ConjunctionNode.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#ConjunctionNode.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.ConjunctionNode.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified for each parameter found
in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current node, if all nodes are already resolved.
Otherwise returns a modifed <a class="reference internal" href="#google.cloud.ndb.query.ConjunctionNode" title="google.cloud.ndb.query.ConjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConjunctionNode</span></code></a> with
each individual node resolved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.DisjunctionNode">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">DisjunctionNode</code><a class="reference internal" href="_modules/google/cloud/ndb/query.html#DisjunctionNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.DisjunctionNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.Node</span></code></a></p>
<p>Tree node representing a boolean <code class="docutils literal notranslate"><span class="pre">OR</span></code> operator on multiple nodes.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This constructor may not always return a <a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisjunctionNode</span></code></a>.
If the passed in <code class="docutils literal notranslate"><span class="pre">nodes</span></code> has only one entry, that single node
will be returned by the constructor.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodes</strong> (<em>Tuple</em><em>[</em><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><em>Node</em></a><em>, </em><em>..</em><em>]</em>) – A list of nodes to be joined.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">nodes</span></code> is empty.</p>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.DisjunctionNode.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#DisjunctionNode.__getnewargs__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.DisjunctionNode.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Private API used to specify <code class="docutils literal notranslate"><span class="pre">__new__</span></code> arguments when unpickling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method only applies if the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> protocol is 2 or
greater.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of stored nodes, converted to a
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a>, ..]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.DisjunctionNode.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">bindings</em>, <em class="sig-param">used</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#DisjunctionNode.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.DisjunctionNode.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a node with parameters replaced by the selected values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A mapping of parameter bindings.</p></li>
<li><p><strong>used</strong> (<em>Dict</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – A mapping of already used
parameters. This will be modified for each parameter found
in <code class="docutils literal notranslate"><span class="pre">bindings</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The current node, if all nodes are already resolved.
Otherwise returns a modifed <a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisjunctionNode</span></code></a> with
each individual node resolved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.AND">
<code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">AND</code><a class="headerlink" href="#google.cloud.ndb.query.AND" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#google.cloud.ndb.query.ConjunctionNode" title="google.cloud.ndb.query.ConjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.ConjunctionNode</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="google.cloud.ndb.query.OR">
<code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">OR</code><a class="headerlink" href="#google.cloud.ndb.query.OR" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#google.cloud.ndb.query.DisjunctionNode" title="google.cloud.ndb.query.DisjunctionNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.ndb.query.DisjunctionNode</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="google.cloud.ndb.query.Query">
<em class="property">class </em><code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">Query</code><span class="sig-paren">(</span><em class="sig-param">kind=None</em>, <em class="sig-param">filters=None</em>, <em class="sig-param">ancestor=None</em>, <em class="sig-param">order_by=None</em>, <em class="sig-param">orders=None</em>, <em class="sig-param">project=None</em>, <em class="sig-param">app=None</em>, <em class="sig-param">namespace=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">distinct_on=None</em>, <em class="sig-param">group_by=None</em>, <em class="sig-param">default_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Query object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The kind of entities to be queried.</p></li>
<li><p><strong>filters</strong> (<a class="reference internal" href="#google.cloud.ndb.query.FilterNode" title="google.cloud.ndb.query.FilterNode"><em>FilterNode</em></a>) – Node representing a filter expression tree.</p></li>
<li><p><strong>ancestor</strong> (<a class="reference internal" href="key.html#google.cloud.ndb.key.Key" title="google.cloud.ndb.key.Key"><em>key.Key</em></a>) – Entities returned will be descendants of
<cite>ancestor</cite>.</p></li>
<li><p><strong>order_by</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference internal" href="model.html#google.cloud.ndb.model.Property" title="google.cloud.ndb.model.Property"><em>google.cloud.ndb.model.Property</em></a><em>]</em><em>]</em>) – The
model properties used to order query results.</p></li>
<li><p><strong>orders</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference internal" href="model.html#google.cloud.ndb.model.Property" title="google.cloud.ndb.model.Property"><em>google.cloud.ndb.model.Property</em></a><em>]</em><em>]</em>) – Deprecated. Synonym for <cite>order_by</cite>.</p></li>
<li><p><strong>project</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The project to perform the query in. Also known as the
app, in Google App Engine. If not passed, uses the client’s value.</p></li>
<li><p><strong>app</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Deprecated. Synonym for <cite>project</cite>.</p></li>
<li><p><strong>namespace</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The namespace to which to restrict results.
If not passed, uses the client’s value.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>distinct_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The field names used to group query
results.</p></li>
<li><p><strong>group_by</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – Deprecated. Synonym for distinct_on.</p></li>
<li><p><strong>default_options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – QueryOptions object.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If any of the arguments are invalid.</p>
</dd>
</dl>
<dl class="method">
<dt id="google.cloud.ndb.query.Query.__iter__">
<code class="sig-name descname">__iter__</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">limit=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="headerlink" href="#google.cloud.ndb.query.Query.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator over query results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Maximum number of query results to return.
If not specified, there is no limit.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of query results to skip.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterator.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryIterator</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.analyze">
<code class="sig-name descname">analyze</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.analyze"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.analyze" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list giving the parameters required by a query.</p>
<p>When a query is created using gql, any bound parameters
are created as ParameterNode instances. This method returns
the names of any such parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>required parameter names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.bind">
<code class="sig-name descname">bind</code><span class="sig-paren">(</span><em class="sig-param">*positional</em>, <em class="sig-param">**keyword</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.bind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Bind parameter values.  Returns a new Query object.</p>
<p>When a query is created using gql, any bound parameters
are created as ParameterNode instances. This method
receives values for both positional (:1, :2, etc.) or
keyword (:xyz, :abc, etc.) bound parameters, then sets the
values accordingly. This mechanism allows easy reuse of a
parameterized query, by passing the values to bind here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positional</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><em>Any</em><em>]</em>) – One or more positional values to bind.</p></li>
<li><p><strong>keyword</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>[</em><em>Any</em><em>]</em>) – One or more keyword values to bind.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new query with the new bound parameter values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Query" title="google.cloud.ndb.query.Query">Query</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#google.cloud.ndb.exceptions.BadArgumentError" title="google.cloud.ndb.exceptions.BadArgumentError"><strong>google.cloud.ndb.exceptions.BadArgumentError</strong></a> – If one of
    the positional parameters is not used in the query.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param">limit=None</em>, <em class="sig-param">*</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of query results, up to a limit.</p>
<p>This returns the same result as <code class="docutils literal notranslate"><span class="pre">len(q.fetch(limit))</span></code>.</p>
<p>Note that you should pass a maximum value to limit the amount of
work done by the query.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The legacy GAE version of NDB claims this is more efficient than
just calling <code class="docutils literal notranslate"><span class="pre">len(q.fetch(limit))</span></code>. Since Datastore does not
provide API for <code class="docutils literal notranslate"><span class="pre">count</span></code>, this version ends up performing the
fetch underneath hood. We can specify <code class="docutils literal notranslate"><span class="pre">keys_only</span></code> to save some
network traffic, making this call really equivalent to
<code class="docutils literal notranslate"><span class="pre">len(q.fetch(limit,</span> <span class="pre">keys_only=True))</span></code>. We can also avoid
marshalling NDB key objects from the returned protocol buffers, but
this is a minor savings–most applications that use NDB will have
their perfomance bound by the Datastore backend, not the CPU.
Generally, any claim of performance improvement using this versus
the equivalent call to <code class="docutils literal notranslate"><span class="pre">fetch</span></code> is exaggerated, at best.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Maximum number of query results to return.
If not specified, there is no limit.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of query results to skip.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A single result, or</dt><dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> if there are no results.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Union[<a class="reference external" href="https://googleapis.github.io/google-cloud-python/latest/datastore/entities.html#google.cloud.datastore.entity.Entity" title="(in google-cloud)">google.cloud.datastore.entity.Entity</a>, <a class="reference internal" href="key.html#google.cloud.ndb.key.Key" title="google.cloud.ndb.key.Key">key.Key</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.count_async">
<code class="sig-name descname">count_async</code><span class="sig-paren">(</span><em class="sig-param">limit=None</em>, <em class="sig-param">*</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.count_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.count_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of query results, up to a limit.</p>
<p>This is the asynchronous version of <a class="reference internal" href="#google.cloud.ndb.query.Query.count" title="google.cloud.ndb.query.Query.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.count()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>See <a class="reference internal" href="#google.cloud.ndb.query.Query.count" title="google.cloud.ndb.query.Query.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.count()</span></code></a> for eventual result.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="tasklets.html#google.cloud.ndb.tasklets.Future" title="google.cloud.ndb.tasklets.Future">tasklets.Future</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.fetch">
<code class="sig-name descname">fetch</code><span class="sig-paren">(</span><em class="sig-param">limit=None</em>, <em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.fetch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query, fetching results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Maximum number of results to fetch.
data:<cite>None</cite> or data:<cite>0</cite> indicates no limit.</p></li>
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of query results to skip.</p></li>
<li><p><strong>limit</strong> – Maximum number of query results to return.
If not specified, there is no limit.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The query results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List([<a class="reference internal" href="model.html#google.cloud.ndb.model.Model" title="google.cloud.ndb.model.Model">model.Model</a>])</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.fetch_async">
<code class="sig-name descname">fetch_async</code><span class="sig-paren">(</span><em class="sig-param">limit=None</em>, <em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.fetch_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.fetch_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query, asynchronously fetching the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of query results to skip.</p></li>
<li><p><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Maximum number of query results to return.
If not specified, there is no limit.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Eventual result will be a List[model.Model] of the</dt><dd><p>results.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="tasklets.html#google.cloud.ndb.tasklets.Future" title="google.cloud.ndb.tasklets.Future">tasklets.Future</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.fetch_page">
<code class="sig-name descname">fetch_page</code><span class="sig-paren">(</span><em class="sig-param">page_size</em>, <em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.fetch_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.fetch_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a page of results.</p>
<p>This is a specialized method for use by paging user interfaces.</p>
<p>To fetch the next page, you pass the cursor returned by one call to the
next call using the <cite>start_cursor</cite> argument.  A common idiom is to pass
the cursor to the client using <code class="xref py py-meth docutils literal notranslate"><span class="pre">_datastore_query.Cursor.urlsafe()</span></code>
and to reconstruct that cursor on a subsequent request using the
<cite>urlsafe</cite> argument to <code class="xref py py-class docutils literal notranslate"><span class="pre">_datastore_query.Cursor</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method relies on cursors which are not available for queries
that involve <code class="docutils literal notranslate"><span class="pre">OR</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">IN</span></code> operators. This feature is not
available for those queries.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The number of results per page. At most, this many</p></li>
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – <dl class="simple">
<dt>DEPRECATED: An object containing options</dt><dd><p>values for some of these arguments.</p>
</dd>
</dl>
<p>results will be returned.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple</dt><dd><p><cite>(results, cursor, more)</cite> where <cite>results</cite> is a list of query
results, <cite>cursor</cite> is a cursor pointing just after the last
result returned, and <cite>more</cite> indicates whether there are
(likely) more results after that.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>, _datastore_query.Cursor, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.fetch_page_async">
<code class="sig-name descname">fetch_page_async</code><span class="sig-paren">(</span><em class="sig-param">page_size</em>, <em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.fetch_page_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.fetch_page_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a page of results.</p>
<p>This is the asynchronous version of <a class="reference internal" href="#google.cloud.ndb.query.Query.fetch_page" title="google.cloud.ndb.query.Query.fetch_page"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.fetch_page()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>See <a class="reference internal" href="#google.cloud.ndb.query.Query.fetch_page" title="google.cloud.ndb.query.Query.fetch_page"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.fetch_page()</span></code></a> for eventual result.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="tasklets.html#google.cloud.ndb.tasklets.Future" title="google.cloud.ndb.tasklets.Future">tasklets.Future</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param">*filters</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Query with additional filter(s) applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filters</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference internal" href="#google.cloud.ndb.query.Node" title="google.cloud.ndb.query.Node"><em>Node</em></a><em>]</em>) – One or more instances of Node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new query with the new filters applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Query" title="google.cloud.ndb.query.Query">Query</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – If one of the filters is not a Node.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first query result, if any.</p>
<p>This is equivalent to calling <code class="docutils literal notranslate"><span class="pre">q.fetch(1)</span></code> and returning the first
result, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A single result, or</dt><dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> if there are no results.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Union[<a class="reference external" href="https://googleapis.github.io/google-cloud-python/latest/datastore/entities.html#google.cloud.datastore.entity.Entity" title="(in google-cloud)">google.cloud.datastore.entity.Entity</a>, <a class="reference internal" href="key.html#google.cloud.ndb.key.Key" title="google.cloud.ndb.key.Key">key.Key</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.get_async">
<code class="sig-name descname">get_async</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.get_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.get_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first query result, if any.</p>
<p>This is the asynchronous version of <a class="reference internal" href="#google.cloud.ndb.query.Query.get" title="google.cloud.ndb.query.Query.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.get()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>See <a class="reference internal" href="#google.cloud.ndb.query.Query.get" title="google.cloud.ndb.query.Query.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.get()</span></code></a> for eventual result.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="tasklets.html#google.cloud.ndb.tasklets.Future" title="google.cloud.ndb.tasklets.Future">tasklets.Future</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.is_distinct">
<em class="property">property </em><code class="sig-name descname">is_distinct</code><a class="headerlink" href="#google.cloud.ndb.query.Query.is_distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>True if results are guaranteed to contain a unique set of property
values.</p>
<p>This happens when every property in distinct_on is also in projection.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.iter">
<code class="sig-name descname">iter</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">limit=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.iter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator over query results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Maximum number of query results to return.
If not specified, there is no limit.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of query results to skip.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterator.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryIterator</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.map">
<code class="sig-name descname">map</code><span class="sig-paren">(</span><em class="sig-param">callback</em>, <em class="sig-param">*</em>, <em class="sig-param">pass_batch_into_callback=None</em>, <em class="sig-param">merge_future=None</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">limit=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.map" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a callback function or tasklet over the query results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback</strong> (<em>Callable</em>) – A function or tasklet to be applied to each
result; see below.</p></li>
<li><p><strong>merge_future</strong> – Optional <code class="docutils literal notranslate"><span class="pre">Future</span></code> subclass; see below.</p></li>
<li><p><strong>keys_only</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Return keys instead of entities.</p></li>
<li><p><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The fields to return as part of the query
results.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of query results to skip.</p></li>
<li><p><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Maximum number of query results to return.
If not specified, there is no limit.</p></li>
<li><p><strong>batch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Number of results to fetch in a single
RPC call. Affects efficiency of queries only. Larger batch
sizes use more memory but make fewer RPC calls.</p></li>
<li><p><strong>prefetch_size</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Overrides batch size for first batch
returned.</p></li>
<li><p><strong>produce_cursors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to generate cursors from query.</p></li>
<li><p><strong>start_cursor</strong> – Starting point for search.</p></li>
<li><p><strong>end_cursor</strong> – Endpoint point for search.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – Override the gRPC timeout, in seconds.</p></li>
<li><p><strong>deadline</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p></li>
<li><p><strong>read_consistency</strong> – If not in a transaction, defaults to
<code class="docutils literal notranslate"><span class="pre">ndb.EVENTUAL</span></code> for potentially faster query results without
having to wait for Datastore to apply pending changes to all
returned records. Otherwise consistency with current
transaction is maintained.</p></li>
<li><p><strong>read_policy</strong> – DEPRECATED: Synonym for <code class="docutils literal notranslate"><span class="pre">read_consistency</span></code>.</p></li>
<li><p><strong>transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – Transaction ID to use for query. Results will
be consistent with Datastore state for that transaction.
Implies <code class="docutils literal notranslate"><span class="pre">read_policy=ndb.STRONG</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#google.cloud.ndb.query.QueryOptions" title="google.cloud.ndb.query.QueryOptions"><em>QueryOptions</em></a>) – DEPRECATED: An object containing options
values for some of these arguments.</p></li>
</ul>
</dd>
</dl>
<p>Callback signature: The callback is normally called with an entity
as argument.  However if keys_only=True is given, it is called
with a Key.  Also, when pass_batch_into_callback is True, it is
called with three arguments: the current batch, the index within
the batch, and the entity or Key at that index.  The callback can
return whatever it wants.  If the callback is None, a trivial
callback is assumed that just returns the entity or key passed in
(ignoring produce_cursors).</p>
<p>Optional merge future: The merge_future is an advanced argument
that can be used to override how the callback results are combined
into the overall map() return value.  By default a list of
callback return values is produced.  By substituting one of a
small number of specialized alternatives you can arrange
otherwise.  See tasklets.MultiFuture for the default
implementation and a description of the protocol the merge_future
object must implement the default.  Alternatives from the same
module include QueueFuture, SerialQueueFuture and ReducingFuture.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>When the query has run to completion and all callbacks have</dt><dd><p>returned, map() returns a list of the results of all callbacks.
(But see ‘optional merge future’ above.)</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.map_async">
<code class="sig-name descname">map_async</code><span class="sig-paren">(</span><em class="sig-param">callback</em>, <em class="sig-param">*</em>, <em class="sig-param">pass_batch_into_callback=None</em>, <em class="sig-param">merge_future=None</em>, <em class="sig-param">keys_only=None</em>, <em class="sig-param">limit=None</em>, <em class="sig-param">projection=None</em>, <em class="sig-param">offset=None</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">prefetch_size=None</em>, <em class="sig-param">produce_cursors=False</em>, <em class="sig-param">start_cursor=None</em>, <em class="sig-param">end_cursor=None</em>, <em class="sig-param">timeout=None</em>, <em class="sig-param">deadline=None</em>, <em class="sig-param">read_consistency=None</em>, <em class="sig-param">read_policy=None</em>, <em class="sig-param">transaction=None</em>, <em class="sig-param">options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.map_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.map_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a callback function or tasklet over the query results.</p>
<p>This is the asynchronous version of <a class="reference internal" href="#google.cloud.ndb.query.Query.map" title="google.cloud.ndb.query.Query.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.map()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>See <a class="reference internal" href="#google.cloud.ndb.query.Query.map" title="google.cloud.ndb.query.Query.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.map()</span></code></a> for eventual result.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="tasklets.html#google.cloud.ndb.tasklets.Future" title="google.cloud.ndb.tasklets.Future">tasklets.Future</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.order">
<code class="sig-name descname">order</code><span class="sig-paren">(</span><em class="sig-param">*props</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.order" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Query with additional sort order(s) applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>props</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference internal" href="model.html#google.cloud.ndb.model.Property" title="google.cloud.ndb.model.Property"><em>google.cloud.ndb.model.Property</em></a><em>]</em><em>]</em>) – One or
more model properties to sort by.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new query with the new order applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Query" title="google.cloud.ndb.query.Query">Query</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="google.cloud.ndb.query.Query.run_to_queue">
<code class="sig-name descname">run_to_queue</code><span class="sig-paren">(</span><em class="sig-param">queue</em>, <em class="sig-param">conn</em>, <em class="sig-param">options=None</em>, <em class="sig-param">dsquery=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#Query.run_to_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.Query.run_to_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Run this query, putting entities into the given queue.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="google.cloud.ndb.query.gql">
<code class="sig-prename descclassname">google.cloud.ndb.query.</code><code class="sig-name descname">gql</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/ndb/query.html#gql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.ndb.query.gql" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a GQL query string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Full GQL query, e.g. ‘SELECT * FROM Kind WHERE
prop = 1 ORDER BY prop2’.</p></li>
<li><p><strong>args</strong> – If present, used to call bind().</p></li>
<li><p><strong>kwds</strong> – If present, used to call bind().</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a query instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#google.cloud.ndb.query.Query" title="google.cloud.ndb.query.Query">Query</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#google.cloud.ndb.exceptions.BadQueryError" title="google.cloud.ndb.exceptions.BadQueryError"><strong>google.cloud.ndb.exceptions.BadQueryError</strong></a> – When bad gql is passed in.</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ndb</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="key.html">Key</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model and Property</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Query</a></li>
<li class="toctree-l1"><a class="reference internal" href="tasklets.html">Tasklets</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="polymodel.html">Polymorphic Models and Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="django-middleware.html">Django Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="msgprop.html">ProtoRPC Message Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="blobstore.html">Blobstore</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Datastore Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Datastore Statistics</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="model.html" title="previous chapter">Model and Property</a></li>
      <li>Next: <a href="tasklets.html" title="next chapter">Tasklets</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Google.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/query.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>